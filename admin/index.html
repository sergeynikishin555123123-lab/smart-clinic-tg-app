<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –ê–∫–∞–¥–µ–º–∏–∏ –ê–ù–ë</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-card: #1e293b;
            --text-primary: #ffffff;
            --text-secondary: #94a3b8;
            --accent: #3b82f6;
            --accent-hover: #2563eb;
            --border: #334155;
            --success: #10b981;
            --error: #ef4444;
            --warning: #f59e0b;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
        }

        .admin-container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .admin-header {
            background: var(--bg-secondary);
            padding: 1rem;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .admin-header h1 {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.25rem;
        }

        .admin-nav {
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border);
            overflow-x: auto;
            position: sticky;
            top: 73px;
            z-index: 99;
        }

        .admin-nav ul {
            display: flex;
            gap: 0.5rem;
            list-style: none;
            padding: 1rem;
            min-width: max-content;
        }

        .admin-nav a {
            color: var(--text-secondary);
            text-decoration: none;
            padding: 0.75rem 1rem;
            border-radius: 0.375rem;
            transition: all 0.3s;
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .admin-nav a:hover,
        .admin-nav a.active {
            background: var(--accent);
            color: white;
        }

        .admin-main {
            flex: 1;
            padding: 1rem;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å–µ—Ç–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: var(--bg-card);
            padding: 1.5rem;
            border-radius: 0.5rem;
            border: 1px solid var(--border);
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--accent);
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        .content-section {
            background: var(--bg-card);
            border-radius: 0.5rem;
            border: 1px solid var(--border);
            margin-bottom: 1.5rem;
            overflow: hidden;
        }

        .section-header {
            padding: 1.25rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .section-header h2 {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.1rem;
        }

        .section-content {
            padding: 1.25rem;
            overflow-x: auto;
        }

        .content-actions {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .btn {
            padding: 0.75rem 1.25rem;
            border: none;
            border-radius: 0.375rem;
            cursor: pointer;
            font-size: 0.875rem;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
            white-space: nowrap;
        }

        .btn-primary {
            background: var(--accent);
            color: white;
        }

        .btn-primary:hover {
            background: var(--accent-hover);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-success:hover {
            background: #059669;
        }

        .btn-danger {
            background: var(--error);
            color: white;
        }

        .btn-danger:hover {
            background: #dc2626;
        }

        .btn-outline {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-primary);
        }

        .btn-outline:hover {
            background: var(--bg-secondary);
        }

        .btn-small {
            padding: 0.5rem 0.75rem;
            font-size: 0.75rem;
        }

        .content-table {
            width: 100%;
            border-collapse: collapse;
            min-width: 600px;
        }

        .content-table th,
        .content-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        .content-table th {
            background: var(--bg-secondary);
            color: var(--text-secondary);
            font-weight: 600;
            font-size: 0.875rem;
        }

        .content-table tr:hover {
            background: var(--bg-secondary);
        }

        .status-active {
            color: var(--success);
        }

        .status-inactive {
            color: var(--error);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            padding: 1rem;
            overflow-y: auto;
        }

        .modal.active {
            display: flex;
            align-items: flex-start;
            justify-content: center;
        }

        .modal-content {
            background: var(--bg-card);
            border-radius: 0.5rem;
            border: 1px solid var(--border);
            width: 100%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            margin-top: 2rem;
        }

        .modal-header {
            padding: 1.25rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-body {
            padding: 1.25rem;
        }

        .form-group {
            margin-bottom: 1.25rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 0.75rem;
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: 0.375rem;
            color: var(--text-primary);
            font-size: 1rem;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--accent);
        }

        .form-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            margin-top: 1.5rem;
            flex-wrap: wrap;
        }

        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .spinner {
            width: 2rem;
            height: 2rem;
            border: 2px solid var(--border);
            border-top: 2px solid var(--accent);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error-message {
            background: #7f1d1d;
            color: #fecaca;
            padding: 1rem;
            border-radius: 0.375rem;
            margin-bottom: 1rem;
        }

        .success-message {
            background: #065f46;
            color: #a7f3d0;
            padding: 1rem;
            border-radius: 0.375rem;
            margin-bottom: 1rem;
        }

        .user-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .badge-admin {
            background: var(--accent);
            color: white;
        }

        .badge-super-admin {
            background: var(--warning);
            color: white;
        }

        .badge-user {
            background: var(--border);
            color: var(--text-secondary);
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            .admin-main {
                padding: 0.75rem;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .section-header {
                padding: 1rem;
            }

            .section-content {
                padding: 1rem;
            }

            .content-actions {
                flex-direction: column;
            }

            .content-actions .btn {
                width: 100%;
                justify-content: center;
            }

            .form-actions {
                flex-direction: column;
            }

            .form-actions .btn {
                width: 100%;
                justify-content: center;
            }

            .modal-content {
                margin-top: 1rem;
            }
        }

        @media (max-width: 480px) {
            .admin-header h1 {
                font-size: 1.1rem;
            }

            .admin-nav ul {
                padding: 0.75rem;
            }

            .admin-nav a {
                padding: 0.6rem 0.8rem;
                font-size: 0.875rem;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .stat-card {
                padding: 1rem;
            }

            .stat-value {
                font-size: 1.5rem;
            }
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ */
        .user-actions {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .role-select {
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: 0.375rem;
            color: var(--text-primary);
            padding: 0.5rem;
            font-size: 0.875rem;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π */
        .instructors-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1rem;
        }

        .instructor-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 0.5rem;
            padding: 1.5rem;
            transition: all 0.3s;
        }

        .instructor-card:hover {
            border-color: var(--accent);
            transform: translateY(-2px);
        }

        .instructor-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .instructor-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
        }

        .instructor-info h3 {
            margin-bottom: 0.25rem;
        }

        .instructor-specialization {
            color: var(--accent);
            font-size: 0.875rem;
        }

        .instructor-bio {
            color: var(--text-secondary);
            font-size: 0.875rem;
            margin-bottom: 1rem;
            line-height: 1.5;
        }

        .instructor-stats {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .instructor-stat {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ */
        .navigation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1rem;
        }

        .navigation-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 0.5rem;
            padding: 1.5rem;
            transition: all 0.3s;
        }

        .navigation-card:hover {
            border-color: var(--accent);
        }
    </style>
</head>
<body>
    <div class="admin-container">
        <header class="admin-header">
            <h1>üîß –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –ê–∫–∞–¥–µ–º–∏–∏ –ê–ù–ë</h1>
        </header>

        <nav class="admin-nav">
            <ul>
                <li><a href="#" class="active" onclick="showTab('dashboard')">üìä –î–∞—à–±–æ—Ä–¥</a></li>
                <li><a href="#" onclick="showTab('courses')">üìö –ö—É—Ä—Å—ã</a></li>
                <li><a href="#" onclick="showTab('podcasts')">üéß –ü–æ–¥–∫–∞—Å—Ç—ã</a></li>
                <li><a href="#" onclick="showTab('videos')">üéØ –í–∏–¥–µ–æ</a></li>
                <li><a href="#" onclick="showTab('materials')">üìã –ú–∞—Ç–µ—Ä–∏–∞–ª—ã</a></li>
                <li><a href="#" onclick="showTab('instructors')">üë®‚Äçüè´ –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏</a></li>
                <li><a href="#" onclick="showTab('users')">üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</a></li>
                <li><a href="#" onclick="showTab('media')">üìÅ –ú–µ–¥–∏–∞</a></li>
                <li><a href="#" onclick="showTab('settings')">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</a></li>
                <li><a href="#" onclick="showTab('navigation')">üß≠ –ù–∞–≤–∏–≥–∞—Ü–∏—è</a></li>
            </ul>
        </nav>

        <main class="admin-main">
            <!-- –î–∞—à–±–æ—Ä–¥ -->
            <div id="dashboard-tab" class="tab-content active">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="total-users">0</div>
                        <div class="stat-label">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="total-courses">0</div>
                        <div class="stat-label">–ö—É—Ä—Å–æ–≤</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="total-materials">0</div>
                        <div class="stat-label">–ú–∞—Ç–µ—Ä–∏–∞–ª–æ–≤</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="active-subscriptions">0</div>
                        <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫</div>
                    </div>
                </div>

                <div class="content-section">
                    <div class="section-header">
                        <h2>üìà –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h2>
                    </div>
                    <div class="section-content">
                        <div class="content-actions">
                            <button class="btn btn-primary" onclick="showAddModal('courses')">
                                ‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫—É—Ä—Å
                            </button>
                            <button class="btn btn-primary" onclick="showAddModal('podcasts')">
                                ‚ûï –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–∫–∞—Å—Ç
                            </button>
                            <button class="btn btn-primary" onclick="showAddModal('videos')">
                                ‚ûï –î–æ–±–∞–≤–∏—Ç—å –≤–∏–¥–µ–æ
                            </button>
                            <button class="btn btn-primary" onclick="showAddModal('materials')">
                                ‚ûï –î–æ–±–∞–≤–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª
                            </button>
                            <button class="btn btn-primary" onclick="showAddModal('instructors')">
                                ‚ûï –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –ö—É—Ä—Å—ã -->
            <div id="courses-tab" class="tab-content">
                <div class="content-section">
                    <div class="section-header">
                        <h2>üìö –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–∞–º–∏</h2>
                        <button class="btn btn-primary" onclick="showAddModal('courses')">
                            ‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫—É—Ä—Å
                        </button>
                    </div>
                    <div class="section-content">
                        <div class="loading" id="courses-loading">
                            <div class="spinner"></div>
                        </div>
                        <table class="content-table" id="courses-table" style="display: none;">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                    <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                                    <th>–¶–µ–Ω–∞</th>
                                    <th>–°—Ç—É–¥–µ–Ω—Ç—ã</th>
                                    <th>–°—Ç–∞—Ç—É—Å</th>
                                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                </tr>
                            </thead>
                            <tbody id="courses-tbody"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- –ü–æ–¥–∫–∞—Å—Ç—ã -->
            <div id="podcasts-tab" class="tab-content">
                <div class="content-section">
                    <div class="section-header">
                        <h2>üéß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–∫–∞—Å—Ç–∞–º–∏</h2>
                        <button class="btn btn-primary" onclick="showAddModal('podcasts')">
                            ‚ûï –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–∫–∞—Å—Ç
                        </button>
                    </div>
                    <div class="section-content">
                        <div class="loading" id="podcasts-loading">
                            <div class="spinner"></div>
                        </div>
                        <table class="content-table" id="podcasts-table" style="display: none;">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                    <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                                    <th>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</th>
                                    <th>–ü—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è</th>
                                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                </tr>
                            </thead>
                            <tbody id="podcasts-tbody"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- –í–∏–¥–µ–æ -->
            <div id="videos-tab" class="tab-content">
                <div class="content-section">
                    <div class="section-header">
                        <h2>üéØ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∏–¥–µ–æ</h2>
                        <button class="btn btn-primary" onclick="showAddModal('videos')">
                            ‚ûï –î–æ–±–∞–≤–∏—Ç—å –≤–∏–¥–µ–æ
                        </button>
                    </div>
                    <div class="section-content">
                        <div class="loading" id="videos-loading">
                            <div class="spinner"></div>
                        </div>
                        <table class="content-table" id="videos-table" style="display: none;">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                    <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                                    <th>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</th>
                                    <th>–ü—Ä–æ—Å–º–æ—Ç—Ä—ã</th>
                                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                </tr>
                            </thead>
                            <tbody id="videos-tbody"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- –ú–∞—Ç–µ—Ä–∏–∞–ª—ã -->
            <div id="materials-tab" class="tab-content">
                <div class="content-section">
                    <div class="section-header">
                        <h2>üìã –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏</h2>
                        <button class="btn btn-primary" onclick="showAddModal('materials')">
                            ‚ûï –î–æ–±–∞–≤–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª
                        </button>
                    </div>
                    <div class="section-content">
                        <div class="loading" id="materials-loading">
                            <div class="spinner"></div>
                        </div>
                        <table class="content-table" id="materials-table" style="display: none;">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                    <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                                    <th>–¢–∏–ø</th>
                                    <th>–ó–∞–≥—Ä—É–∑–∫–∏</th>
                                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                </tr>
                            </thead>
                            <tbody id="materials-tbody"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏ -->
            <div id="instructors-tab" class="tab-content">
                <div class="content-section">
                    <div class="section-header">
                        <h2>üë®‚Äçüè´ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è–º–∏</h2>
                        <button class="btn btn-primary" onclick="showAddModal('instructors')">
                            ‚ûï –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
                        </button>
                    </div>
                    <div class="section-content">
                        <div class="loading" id="instructors-loading">
                            <div class="spinner"></div>
                        </div>
                        <div class="instructors-grid" id="instructors-grid" style="display: none;"></div>
                    </div>
                </div>
            </div>

            <!-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ -->
            <div id="users-tab" class="tab-content">
                <div class="content-section">
                    <div class="section-header">
                        <h2>üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h2>
                    </div>
                    <div class="section-content">
                        <div class="loading" id="users-loading">
                            <div class="spinner"></div>
                        </div>
                        <table class="content-table" id="users-table" style="display: none;">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>–ò–º—è</th>
                                    <th>Username</th>
                                    <th>–†–æ–ª—å</th>
                                    <th>–ü–æ–¥–ø–∏—Å–∫–∞</th>
                                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                </tr>
                            </thead>
                            <tbody id="users-tbody"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- –ú–µ–¥–∏–∞ -->
            <div id="media-tab" class="tab-content">
                <div class="content-section">
                    <div class="section-header">
                        <h2>üìÅ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–¥–∏–∞</h2>
                        <button class="btn btn-primary" onclick="showMediaUploadModal()">
                            üì§ –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª
                        </button>
                    </div>
                    <div class="section-content">
                        <div class="loading" id="media-loading">
                            <div class="spinner"></div>
                        </div>
                        <div class="media-grid" id="media-grid" style="display: none;"></div>
                    </div>
                </div>
            </div>

            <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
            <div id="settings-tab" class="tab-content">
                <div class="content-section">
                    <div class="section-header">
                        <h2>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã</h2>
                    </div>
                    <div class="section-content">
                        <div class="form-group">
                            <label>–ù–∞–∑–≤–∞–Ω–∏–µ –∞–∫–∞–¥–µ–º–∏–∏</label>
                            <input type="text" class="form-control" value="–ê–∫–∞–¥–µ–º–∏—è –ê–ù–ë">
                        </div>
                        <div class="form-group">
                            <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                            <textarea class="form-control" rows="3">–°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–ª—è –≤—Ä–∞—á–µ–π</textarea>
                        </div>
                        <div class="form-actions">
                            <button class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
            <div id="navigation-tab" class="tab-content">
                <div class="content-section">
                    <div class="section-header">
                        <h2>üß≠ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π</h2>
                        <button class="btn btn-primary" onclick="showAddNavigationModal()">
                            ‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É
                        </button>
                    </div>
                    <div class="section-content">
                        <div class="loading" id="navigation-loading">
                            <div class="spinner"></div>
                        </div>
                        <div class="navigation-grid" id="navigation-grid" style="display: none;"></div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ -->
    <div id="add-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">–î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç</h3>
                <button class="modal-close" onclick="closeModal()">√ó</button>
            </div>
            <div class="modal-body">
                <form id="content-form" enctype="multipart/form-data">
                    <input type="hidden" id="content-type" name="contentType">
                    <input type="hidden" id="content-id" name="id">
                    
                    <div class="form-group">
                        <label for="title">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                        <input type="text" id="title" name="title" class="form-control" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="description">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                        <textarea id="description" name="description" class="form-control" rows="3" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                        <input type="text" id="category" name="category" class="form-control" required>
                    </div>
                    
                    <div id="course-fields" style="display: none;">
                        <div class="form-group">
                            <label for="price">–¶–µ–Ω–∞ (‚ÇΩ)</label>
                            <input type="number" id="price" name="price" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="discount">–°–∫–∏–¥–∫–∞ (%)</label>
                            <input type="number" id="discount" name="discount" class="form-control" min="0" max="100">
                        </div>
                        <div class="form-group">
                            <label for="duration">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</label>
                            <input type="text" id="duration" name="duration" class="form-control" placeholder="12 –Ω–µ–¥–µ–ª—å" required>
                        </div>
                        <div class="form-group">
                            <label for="modules">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ–¥—É–ª–µ–π</label>
                            <input type="number" id="modules" name="modules" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="level">–£—Ä–æ–≤–µ–Ω—å</label>
                            <select id="level" name="level" class="form-control" required>
                                <option value="beginner">–ù–∞—á–∏–Ω–∞—é—â–∏–π</option>
                                <option value="intermediate">–°—Ä–µ–¥–Ω–∏–π</option>
                                <option value="advanced">–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π</option>
                            </select>
                        </div>
                    </div>

                    <div id="instructor-fields" style="display: none;">
                        <div class="form-group">
                            <label for="specialization">–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è</label>
                            <input type="text" id="specialization" name="specialization" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="bio">–ë–∏–æ–≥—Ä–∞—Ñ–∏—è</label>
                            <textarea id="bio" name="bio" class="form-control" rows="4" required></textarea>
                        </div>
                        <div class="form-group">
                            <label for="experience_years">–û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã (–ª–µ—Ç)</label>
                            <input type="number" id="experience_years" name="experience_years" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="instructor_email">Email</label>
                            <input type="email" id="instructor_email" name="email" class="form-control">
                        </div>
                        <div class="form-group">
                            <label for="social_links">–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏ (JSON)</label>
                            <textarea id="social_links" name="social_links" class="form-control" rows="3" placeholder='{"telegram": "@username", "instagram": "@username"}'></textarea>
                        </div>
                    </div>
                    
                    <div id="media-fields">
                        <div class="form-group">
                            <label for="image_url">URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</label>
                            <input type="url" id="image_url" name="image_url" class="form-control">
                        </div>
                        
                        <div class="form-group">
                            <label for="file">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª</label>
                            <input type="file" id="file" name="file" class="form-control">
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn btn-outline" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
                        <button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ -->
    <div id="user-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º</h3>
                <button class="modal-close" onclick="closeUserModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>–†–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                    <select id="user-role" class="form-control">
                        <option value="user">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</option>
                        <option value="admin">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</option>
                        <option value="super_admin">–°—É–ø–µ—Ä-–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-outline" onclick="closeUserModal()">–û—Ç–º–µ–Ω–∞</button>
                    <button type="button" class="btn btn-primary" onclick="saveUserRole()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentTab = 'dashboard';
        let adminData = {};
        let currentEditingUser = null;

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
        async function initAdmin() {
            try {
                await loadStats();
                showTab('dashboard');
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
                await checkAdminAccess();
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:', error);
                showError('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ');
            }
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
        async function checkAdminAccess() {
            try {
                // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ API
                const response = await fetch('/api/user', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        user: { id: 898508164, first_name: 'Admin', username: 'admin' } 
                    })
                });
                
                const data = await response.json();
                if (data.success && data.user) {
                    if (!data.user.is_admin && !data.user.is_super_admin) {
                        showError('–£ –≤–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏');
                        setTimeout(() => window.location.href = '/webapp/', 3000);
                    }
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞:', error);
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        async function loadStats() {
            try {
                const response = await fetch('/api/admin/stats');
                const data = await response.json();
                
                if (data.success) {
                    document.getElementById('total-users').textContent = data.data.totalUsers;
                    document.getElementById('total-courses').textContent = data.data.totalCourses;
                    document.getElementById('total-materials').textContent = data.data.totalMaterials;
                    document.getElementById('active-subscriptions').textContent = data.data.activeSubscriptions;
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:', error);
            }
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
        function showTab(tabName) {
            // –°–∫—Ä—ã—Ç—å –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.style.display = 'none';
            });
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
            document.getElementById(`${tabName}-tab`).style.display = 'block';
            
            // –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é
            document.querySelectorAll('.admin-nav a').forEach(link => {
                link.classList.remove('active');
            });
            event.target.classList.add('active');
            
            currentTab = tabName;
            
            // –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤–∫–ª–∞–¥–∫–∏
            loadTabData(tabName);
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≤–∫–ª–∞–¥–∫–∏
        async function loadTabData(tabName) {
            try {
                switch(tabName) {
                    case 'courses':
                        await loadCourses();
                        break;
                    case 'podcasts':
                        await loadPodcasts();
                        break;
                    case 'videos':
                        await loadVideos();
                        break;
                    case 'materials':
                        await loadMaterials();
                        break;
                    case 'instructors':
                        await loadInstructors();
                        break;
                    case 'users':
                        await loadUsers();
                        break;
                    case 'media':
                        await loadMedia();
                        break;
                    case 'navigation':
                        await loadNavigation();
                        break;
                }
            } catch (error) {
                console.error(`–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è ${tabName}:`, error);
                showError(`–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è ${tabName}`);
            }
        }

        // ==================== –§–£–ù–ö–¶–ò–ò –î–õ–Ø –£–ü–†–ê–í–õ–ï–ù–ò–Ø –ù–ê–í–ò–ì–ê–¶–ò–ï–ô ====================

        async function loadNavigation() {
            try {
                const response = await fetch('/api/navigation');
                const data = await response.json();
                
                if (data.success) {
                    const grid = document.getElementById('navigation-grid');
                    const loading = document.getElementById('navigation-loading');
                    
                    loading.style.display = 'none';
                    grid.style.display = 'grid';
                    
                    grid.innerHTML = data.data.map(item => `
                        <div class="navigation-card">
                            <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                                <div style="font-size: 2rem;">${item.icon}</div>
                                <div style="flex: 1;">
                                    <h4 style="margin: 0 0 0.25rem 0;">${item.title}</h4>
                                    <p style="margin: 0; color: var(--text-secondary); font-size: 0.875rem;">${item.description}</p>
                                    <div style="font-size: 0.75rem; color: var(--text-secondary); margin-top: 0.5rem;">
                                        –°—Ç—Ä–∞–Ω–∏—Ü–∞: ${item.page} | –ü–æ–∑–∏—Ü–∏—è: ${item.position} | 
                                        –°—Ç–∞—Ç—É—Å: ${item.is_active ? '–ê–∫—Ç–∏–≤–Ω–∞' : '–ù–µ–∞–∫—Ç–∏–≤–Ω–∞'}
                                    </div>
                                </div>
                            </div>
                            ${item.image_url ? `
                            <div style="margin-bottom: 1rem;">
                                <img src="${item.image_url}" alt="${item.title}" 
                                     style="width: 100%; height: 100px; object-fit: cover; border-radius: 0.5rem;"
                                     onerror="this.style.display='none'">
                            </div>
                            ` : ''}
                            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                                <button class="btn btn-outline btn-small" onclick="editNavigation(${item.id})">
                                    ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                                </button>
                                <button class="btn btn-danger btn-small" onclick="deleteNavigation(${item.id})">
                                    üóëÔ∏è –£–¥–∞–ª–∏—Ç—å
                                </button>
                                <button class="btn btn-outline btn-small" onclick="toggleNavigationStatus(${item.id}, ${!item.is_active})">
                                    ${item.is_active ? 'üëÅÔ∏è –°–∫—Ä—ã—Ç—å' : 'üëÄ –ü–æ–∫–∞–∑–∞—Ç—å'}
                                </button>
                            </div>
                        </div>
                    `).join('');
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏:', error);
                showError('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é');
            }
        }

        function showAddNavigationModal(editItem = null) {
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>${editItem ? '‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å' : '‚ûï –î–æ–±–∞–≤–∏—Ç—å'} –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—É—é –∫–Ω–æ–ø–∫—É</h3>
                        <button class="modal-close" onclick="this.closest('.modal').remove()">√ó</button>
                    </div>
                    <div class="modal-body">
                        <form id="navigation-form" enctype="multipart/form-data">
                            <div class="form-group">
                                <label for="nav-title">–ù–∞–∑–≤–∞–Ω–∏–µ *</label>
                                <input type="text" id="nav-title" class="form-control" value="${editItem ? editItem.title : ''}" required>
                            </div>
                            <div class="form-group">
                                <label for="nav-description">–û–ø–∏—Å–∞–Ω–∏–µ *</label>
                                <textarea id="nav-description" class="form-control" rows="2" required>${editItem ? editItem.description : ''}</textarea>
                            </div>
                            <div class="form-group">
                                <label for="nav-icon">–ò–∫–æ–Ω–∫–∞ *</label>
                                <input type="text" id="nav-icon" class="form-control" value="${editItem ? editItem.icon : ''}" placeholder="üìö" required>
                            </div>
                            <div class="form-group">
                                <label for="nav-page">–°—Ç—Ä–∞–Ω–∏—Ü–∞ *</label>
                                <select id="nav-page" class="form-control" required>
                                    <option value="courses" ${editItem && editItem.page === 'courses' ? 'selected' : ''}>–ö—É—Ä—Å—ã</option>
                                    <option value="podcasts" ${editItem && editItem.page === 'podcasts' ? 'selected' : ''}>–ü–æ–¥–∫–∞—Å—Ç—ã</option>
                                    <option value="streams" ${editItem && editItem.page === 'streams' ? 'selected' : ''}>–≠—Ñ–∏—Ä—ã</option>
                                    <option value="videos" ${editItem && editItem.page === 'videos' ? 'selected' : ''}>–í–∏–¥–µ–æ</option>
                                    <option value="materials" ${editItem && editItem.page === 'materials' ? 'selected' : ''}>–ú–∞—Ç–µ—Ä–∏–∞–ª—ã</option>
                                    <option value="events" ${editItem && editItem.page === 'events' ? 'selected' : ''}>–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</option>
                                    <option value="community" ${editItem && editItem.page === 'community' ? 'selected' : ''}>–°–æ–æ–±—â–µ—Å—Ç–≤–æ</option>
                                    <option value="favorites" ${editItem && editItem.page === 'favorites' ? 'selected' : ''}>–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</option>
                                    <option value="profile" ${editItem && editItem.page === 'profile' ? 'selected' : ''}>–ü—Ä–æ—Ñ–∏–ª—å</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="nav-position">–ü–æ–∑–∏—Ü–∏—è *</label>
                                <input type="number" id="nav-position" class="form-control" value="${editItem ? editItem.position : 0}" min="0" required>
                            </div>
                            <div class="form-group">
                                <label for="nav-image">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</label>
                                <input type="file" id="nav-image" class="form-control" accept="image/*">
                                ${editItem && editItem.image_url ? `
                                <div style="margin-top: 0.5rem;">
                                    <img src="${editItem.image_url}" alt="Current image" style="max-width: 200px; max-height: 100px; border-radius: 0.25rem;">
                                </div>
                                ` : ''}
                            </div>
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" id="nav-active" ${editItem ? editItem.is_active ? 'checked' : '' : 'checked'}>
                                    –ê–∫—Ç–∏–≤–Ω–∞—è
                                </label>
                            </div>
                            <div class="form-actions">
                                <button type="button" class="btn btn-outline" onclick="this.closest('.modal').remove()">–û—Ç–º–µ–Ω–∞</button>
                                <button type="submit" class="btn btn-primary">${editItem ? '–û–±–Ω–æ–≤–∏—Ç—å' : '–°–æ–∑–¥–∞—Ç—å'}</button>
                            </div>
                        </form>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            document.getElementById('navigation-form').addEventListener('submit', async function(e) {
                e.preventDefault();
                
                const formData = new FormData();
                formData.append('title', document.getElementById('nav-title').value);
                formData.append('description', document.getElementById('nav-description').value);
                formData.append('icon', document.getElementById('nav-icon').value);
                formData.append('page', document.getElementById('nav-page').value);
                formData.append('position', document.getElementById('nav-position').value);
                formData.append('is_active', document.getElementById('nav-active').checked);
                
                const imageFile = document.getElementById('nav-image').files[0];
                if (imageFile) {
                    formData.append('image', imageFile);
                }
                
                try {
                    const url = editItem ? `/api/admin/navigation/${editItem.id}` : '/api/admin/navigation';
                    const method = editItem ? 'PUT' : 'POST';
                    
                    const response = await fetch(url, {
                        method: method,
                        body: formData
                    });
                    
                    const data = await response.json();
                    
                    if (data.success) {
                        showSuccess(`–ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–∞—è –∫–Ω–æ–ø–∫–∞ ${editItem ? '–æ–±–Ω–æ–≤–ª–µ–Ω–∞' : '—Å–æ–∑–¥–∞–Ω–∞'}`);
                        modal.remove();
                        loadNavigation();
                    } else {
                        throw new Error(data.error);
                    }
                } catch (error) {
                    showError(`–û—à–∏–±–∫–∞ ${editItem ? '–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è' : '—Å–æ–∑–¥–∞–Ω–∏—è'} –Ω–∞–≤–∏–≥–∞—Ü–∏–∏: ${error.message}`);
                }
            });
        }

        async function deleteNavigation(id) {
            if (!confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç?')) return;
            
            try {
                const response = await fetch(`/api/admin/navigation/${id}`, {
                    method: 'DELETE'
                });
                
                const data = await response.json();
                
                if (data.success) {
                    showSuccess('–ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç —É–¥–∞–ª–µ–Ω');
                    loadNavigation();
                } else {
                    throw new Error(data.error);
                }
            } catch (error) {
                showError('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞: ' + error.message);
            }
        }

        async function toggleNavigationStatus(id, newStatus) {
            try {
                const response = await fetch(`/api/admin/navigation/${id}`, {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ is_active: newStatus })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    showSuccess(`–ù–∞–≤–∏–≥–∞—Ü–∏—è ${newStatus ? '–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞' : '–¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞'}`);
                    loadNavigation();
                } else {
                    throw new Error(data.error);
                }
            } catch (error) {
                showError('–û—à–∏–±–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞: ' + error.message);
            }
        }

        async function editNavigation(id) {
            try {
                const response = await fetch('/api/navigation');
                const data = await response.json();
                
                if (data.success) {
                    const item = data.data.find(nav => nav.id === id);
                    if (item) {
                        showAddNavigationModal(item);
                    }
                }
            } catch (error) {
                showError('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–∞–≤–∏–≥–∞—Ü–∏–∏');
            }
        }

        // ==================== –£–õ–£–ß–®–ï–ù–ù–´–ï –§–û–†–ú–´ –î–û–ë–ê–í–õ–ï–ù–ò–Ø –ö–û–ù–¢–ï–ù–¢–ê ====================

        function showAddModal(type, editData = null) {
            const modal = document.getElementById('add-modal');
            const title = document.getElementById('modal-title');
            const form = document.getElementById('content-form');
            const contentType = document.getElementById('content-type');
            const contentId = document.getElementById('content-id');
            
            // –°–±—Ä–æ—Å —Ñ–æ—Ä–º—ã
            form.reset();
            
            contentType.value = type;
            contentId.value = editData ? editData.id : '';
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∞
            title.textContent = editData ? `‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å ${getContentTypeName(type)}` : `‚ûï –î–æ–±–∞–≤–∏—Ç—å ${getContentTypeName(type)}`;
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –Ω—É–∂–Ω—ã–µ –ø–æ–ª—è
            showRelevantFields(type);
            
            // –ó–∞–ø–æ–ª–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –µ—Å–ª–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
            if (editData) {
                populateFormData(editData, type);
            }
            
            modal.classList.add('active');
        }

        function showRelevantFields(type) {
            // –°–∫—Ä—ã—Ç—å –≤—Å–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
            document.querySelectorAll('[id$="-fields"]').forEach(el => {
                el.style.display = 'none';
            });
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –Ω—É–∂–Ω—ã–µ –ø–æ–ª—è
            switch(type) {
                case 'courses':
                    document.getElementById('course-fields').style.display = 'block';
                    break;
                case 'instructors':
                    document.getElementById('instructor-fields').style.display = 'block';
                    break;
            }
            
            // –í—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –º–µ–¥–∏–∞ –ø–æ–ª—è
            document.getElementById('media-fields').style.display = 'block';
        }

        function populateFormData(data, type) {
            // –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è
            document.getElementById('title').value = data.title || data.name || '';
            document.getElementById('description').value = data.description || '';
            document.getElementById('category').value = data.category || '';
            document.getElementById('image_url').value = data.image_url || data.avatar_url || data.thumbnail_url || '';
            
            // –ü–æ–ª—è –∫—É—Ä—Å–∞
            if (type === 'courses') {
                document.getElementById('price').value = data.price || '';
                document.getElementById('discount').value = data.discount || '';
                document.getElementById('duration').value = data.duration || '';
                document.getElementById('modules').value = data.modules || '';
                document.getElementById('level').value = data.level || 'beginner';
            }
            
            // –ü–æ–ª—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
            if (type === 'instructors') {
                document.getElementById('specialization').value = data.specialization || '';
                document.getElementById('bio').value = data.bio || '';
                document.getElementById('experience_years').value = data.experience_years || '';
                document.getElementById('instructor_email').value = data.email || '';
                document.getElementById('social_links').value = data.social_links ? JSON.stringify(data.social_links) : '';
            }
        }

        function getContentTypeName(type) {
            const names = {
                'courses': '–∫—É—Ä—Å',
                'podcasts': '–ø–æ–¥–∫–∞—Å—Ç', 
                'videos': '–≤–∏–¥–µ–æ',
                'materials': '–º–∞—Ç–µ—Ä–∏–∞–ª',
                'streams': '—ç—Ñ–∏—Ä',
                'events': '–º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ',
                'news': '–Ω–æ–≤–æ—Å—Ç—å',
                'instructors': '–ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è'
            };
            return names[type] || '–∫–æ–Ω—Ç–µ–Ω—Ç';
        }

        // ==================== –û–ë–†–ê–ë–û–¢–ß–ò–ö –§–û–†–ú–´ –ö–û–ù–¢–ï–ù–¢–ê ====================

        document.getElementById('content-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const type = document.getElementById('content-type').value;
            const id = document.getElementById('content-id').value;
            
            const formData = new FormData();
            
            // –î–æ–±–∞–≤–ª—è–µ–º –≤—Å–µ –ø–æ–ª—è —Ñ–æ—Ä–º—ã
            const formElements = this.elements;
            for (let element of formElements) {
                if (element.name && element.value && element.type !== 'file') {
                    formData.append(element.name, element.value);
                }
                if (element.type === 'file' && element.files[0]) {
                    formData.append(element.name, element.files[0]);
                }
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Ç–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞
            formData.append('contentType', type);
            
            try {
                const url = id ? `/api/admin/content/${type}/${id}` : `/api/admin/content/${type}`;
                const method = id ? 'PUT' : 'POST';
                
                const response = await fetch(url, {
                    method: method,
                    body: formData
                });
                
                const data = await response.json();
                
                if (data.success) {
                    showSuccess(`–ö–æ–Ω—Ç–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ ${id ? '–æ–±–Ω–æ–≤–ª–µ–Ω' : '—Å–æ–∑–¥–∞–Ω'}`);
                    closeModal();
                    loadTabData(currentTab);
                } else {
                    throw new Error(data.error);
                }
            } catch (error) {
                showError(`–û—à–∏–±–∫–∞ ${id ? '–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è' : '—Å–æ–∑–¥–∞–Ω–∏—è'} –∫–æ–Ω—Ç–µ–Ω—Ç–∞: ${error.message}`);
            }
        });

        function closeModal() {
            document.getElementById('add-modal').classList.remove('active');
        }

        // –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
        async function loadCourses() {
            const loading = document.getElementById('courses-loading');
            const table = document.getElementById('courses-table');
            const tbody = document.getElementById('courses-tbody');
            
            try {
                const response = await fetch('/api/content/courses?limit=100');
                const data = await response.json();
                
                if (data.success) {
                    loading.style.display = 'none';
                    table.style.display = 'table';
                    
                    tbody.innerHTML = data.data.map(course => `
                        <tr>
                            <td>${course.id}</td>
                            <td>
                                <strong>${course.title}</strong>
                                <div style="font-size: 0.875rem; color: var(--text-secondary); margin-top: 0.25rem;">
                                    ${course.description}
                                </div>
                            </td>
                            <td>${course.category}</td>
                            <td>${formatPrice(course.price)}</td>
                            <td>${course.students_count}</td>
                            <td class="${course.is_active !== false ? 'status-active' : 'status-inactive'}">
                                ${course.is_active !== false ? '–ê–∫—Ç–∏–≤–µ–Ω' : '–ù–µ–∞–∫—Ç–∏–≤–µ–Ω'}
                            </td>
                            <td>
                                <div class="user-actions">
                                    <button class="btn btn-outline btn-small" onclick="showAddModal('courses', ${JSON.stringify(course).replace(/"/g, '&quot;')})">
                                        ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                                    </button>
                                    <button class="btn btn-danger btn-small" onclick="deleteContent('courses', ${course.id})">
                                        üóëÔ∏è –£–¥–∞–ª–∏—Ç—å
                                    </button>
                                </div>
                            </td>
                        </tr>
                    `).join('');
                } else {
                    throw new Error(data.error);
                }
            } catch (error) {
                loading.style.display = 'none';
                showError('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∫—É—Ä—Å—ã: ' + error.message);
            }
        }

        async function loadInstructors() {
            const loading = document.getElementById('instructors-loading');
            const grid = document.getElementById('instructors-grid');
            
            try {
                const response = await fetch('/api/instructors');
                const data = await response.json();
                
                if (data.success) {
                    loading.style.display = 'none';
                    grid.style.display = 'grid';
                    
                    grid.innerHTML = data.data.map(instructor => `
                        <div class="instructor-card">
                            <div class="instructor-header">
                                <img src="${instructor.avatar_url || 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face'}" 
                                     alt="${instructor.name}" 
                                     class="instructor-avatar"
                                     onerror="this.src='https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face'">
                                <div class="instructor-info">
                                    <h3>${instructor.name}</h3>
                                    <div class="instructor-specialization">${instructor.specialization}</div>
                                </div>
                            </div>
                            <div class="instructor-bio">
                                ${instructor.bio || '–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è...'}
                            </div>
                            <div class="instructor-stats">
                                <div class="instructor-stat">
                                    üïê ${instructor.experience_years} –ª–µ—Ç –æ–ø—ã—Ç–∞
                                </div>
                                ${instructor.email ? `
                                <div class="instructor-stat">
                                    üìß ${instructor.email}
                                </div>
                                ` : ''}
                            </div>
                            <div class="user-actions">
                                <button class="btn btn-outline btn-small" onclick="showAddModal('instructors', ${JSON.stringify(instructor).replace(/"/g, '&quot;')})">
                                    ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                                </button>
                                <button class="btn btn-danger btn-small" onclick="deleteInstructor(${instructor.id})">
                                    üóëÔ∏è –£–¥–∞–ª–∏—Ç—å
                                </button>
                            </div>
                        </div>
                    `).join('');
                }
            } catch (error) {
                loading.style.display = 'none';
                showError('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π');
            }
        }

        async function loadUsers() {
            const loading = document.getElementById('users-loading');
            const table = document.getElementById('users-table');
            const tbody = document.getElementById('users-tbody');
            
            try {
                // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å API –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ
                const demoUsers = [
                    {
                        id: 1,
                        first_name: '–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤',
                        username: '@ivanpetrov',
                        is_admin: false,
                        is_super_admin: true,
                        subscription_end: '2025-12-31'
                    },
                    {
                        id: 2,
                        first_name: '–ê–Ω–Ω–∞ –°–∏–¥–æ—Ä–æ–≤–∞',
                        username: '@annasid',
                        is_admin: true,
                        is_super_admin: false,
                        subscription_end: '2025-02-20'
                    },
                    {
                        id: 3,
                        first_name: '–ú–∏—Ö–∞–∏–ª –ö–æ–∑–ª–æ–≤',
                        username: '@mikek',
                        is_admin: false,
                        is_super_admin: false,
                        subscription_end: '2024-11-30'
                    }
                ];
                
                loading.style.display = 'none';
                table.style.display = 'table';
                
                tbody.innerHTML = demoUsers.map(user => {
                    let roleBadge = '';
                    if (user.is_super_admin) {
                        roleBadge = '<span class="user-badge badge-super-admin">–°—É–ø–µ—Ä-–∞–¥–º–∏–Ω</span>';
                    } else if (user.is_admin) {
                        roleBadge = '<span class="user-badge badge-admin">–ê–¥–º–∏–Ω</span>';
                    } else {
                        roleBadge = '<span class="user-badge badge-user">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</span>';
                    }
                    
                    return `
                        <tr>
                            <td>${user.id}</td>
                            <td>${user.first_name}</td>
                            <td>${user.username}</td>
                            <td>${roleBadge}</td>
                            <td>–¥–æ ${new Date(user.subscription_end).toLocaleDateString('ru-RU')}</td>
                            <td>
                                <div class="user-actions">
                                    <button class="btn btn-outline btn-small" onclick="editUserRole(${user.id})">
                                        üëë –ò–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å
                                    </button>
                                    <button class="btn btn-outline btn-small">
                                        ‚úâÔ∏è –ù–∞–ø–∏—Å–∞—Ç—å
                                    </button>
                                </div>
                            </td>
                        </tr>
                    `;
                }).join('');
                
            } catch (error) {
                loading.style.display = 'none';
                showError('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π');
            }
        }

        async function loadPodcasts() {
            const loading = document.getElementById('podcasts-loading');
            const table = document.getElementById('podcasts-table');
            const tbody = document.getElementById('podcasts-tbody');
            
            try {
                const response = await fetch('/api/content');
                const data = await response.json();
                
                if (data.success) {
                    loading.style.display = 'none';
                    table.style.display = 'table';
                    
                    tbody.innerHTML = data.data.podcasts.map(podcast => `
                        <tr>
                            <td>${podcast.id}</td>
                            <td>${podcast.title}</td>
                            <td>${podcast.category}</td>
                            <td>${podcast.duration}</td>
                            <td>${podcast.listens}</td>
                            <td>
                                <div class="user-actions">
                                    <button class="btn btn-outline btn-small" onclick="showAddModal('podcasts', ${JSON.stringify(podcast).replace(/"/g, '&quot;')})">
                                        ‚úèÔ∏è
                                    </button>
                                    <button class="btn btn-danger btn-small" onclick="deleteContent('podcasts', ${podcast.id})">
                                        üóëÔ∏è
                                    </button>
                                </div>
                            </td>
                        </tr>
                    `).join('');
                }
            } catch (error) {
                loading.style.display = 'none';
                showError('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø–æ–¥–∫–∞—Å—Ç—ã');
            }
        }

        async function loadVideos() {
            const loading = document.getElementById('videos-loading');
            const table = document.getElementById('videos-table');
            const tbody = document.getElementById('videos-tbody');
            
            try {
                const response = await fetch('/api/content');
                const data = await response.json();
                
                if (data.success) {
                    loading.style.display = 'none';
                    table.style.display = 'table';
                    
                    tbody.innerHTML = data.data.videos.map(video => `
                        <tr>
                            <td>${video.id}</td>
                            <td>${video.title}</td>
                            <td>${video.category}</td>
                            <td>${video.duration}</td>
                            <td>${video.views}</td>
                            <td>
                                <div class="user-actions">
                                    <button class="btn btn-outline btn-small" onclick="showAddModal('videos', ${JSON.stringify(video).replace(/"/g, '&quot;')})">
                                        ‚úèÔ∏è
                                    </button>
                                    <button class="btn btn-danger btn-small" onclick="deleteContent('videos', ${video.id})">
                                        üóëÔ∏è
                                    </button>
                                </div>
                            </td>
                        </tr>
                    `).join('');
                }
            } catch (error) {
                loading.style.display = 'none';
                showError('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤–∏–¥–µ–æ');
            }
        }

        async function loadMaterials() {
            const loading = document.getElementById('materials-loading');
            const table = document.getElementById('materials-table');
            const tbody = document.getElementById('materials-tbody');
            
            try {
                const response = await fetch('/api/content');
                const data = await response.json();
                
                if (data.success) {
                    loading.style.display = 'none';
                    table.style.display = 'table';
                    
                    tbody.innerHTML = data.data.materials.map(material => `
                        <tr>
                            <td>${material.id}</td>
                            <td>${material.title}</td>
                            <td>${material.category}</td>
                            <td>${material.material_type}</td>
                            <td>${material.downloads}</td>
                            <td>
                                <div class="user-actions">
                                    <button class="btn btn-outline btn-small" onclick="showAddModal('materials', ${JSON.stringify(material).replace(/"/g, '&quot;')})">
                                        ‚úèÔ∏è
                                    </button>
                                    <button class="btn btn-danger btn-small" onclick="deleteContent('materials', ${material.id})">
                                        üóëÔ∏è
                                    </button>
                                </div>
                            </td>
                        </tr>
                    `).join('');
                }
            } catch (error) {
                loading.style.display = 'none';
                showError('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã');
            }
        }

        async function loadMedia() {
            const loading = document.getElementById('media-loading');
            const grid = document.getElementById('media-grid');
            
            try {
                const response = await fetch('/api/media');
                const data = await response.json();
                
                if (data.success) {
                    loading.style.display = 'none';
                    grid.style.display = 'grid';
                    grid.style.gridTemplateColumns = 'repeat(auto-fill, minmax(200px, 1fr))';
                    grid.style.gap = '1rem';
                    
                    grid.innerHTML = data.files.map(file => `
                        <div class="media-item" style="background: var(--bg-secondary); padding: 1rem; border-radius: 0.5rem; text-align: center;">
                            <div style="font-size: 2rem; text-align: center; margin-bottom: 0.5rem;">
                                ${getFileIcon(file.mime_type)}
                            </div>
                            <div style="font-size: 0.875rem; word-break: break-all; margin-bottom: 0.5rem;">
                                ${file.original_name}
                            </div>
                            <div style="font-size: 0.75rem; color: var(--text-secondary); margin-bottom: 1rem;">
                                ${formatFileSize(file.size)}
                            </div>
                            <div style="display: flex; gap: 0.5rem; justify-content: center;">
                                <button class="btn btn-outline btn-small" onclick="copyUrl('${file.url}')">
                                    üìã
                                </button>
                                <button class="btn btn-danger btn-small" onclick="deleteMedia(${file.id})">
                                    üóëÔ∏è
                                </button>
                            </div>
                        </div>
                    `).join('');
                }
            } catch (error) {
                loading.style.display = 'none';
                showError('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –º–µ–¥–∏–∞');
            }
        }

        // –§—É–Ω–∫—Ü–∏–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
        function editUserRole(userId) {
            currentEditingUser = userId;
            document.getElementById('user-modal').classList.add('active');
        }

        function closeUserModal() {
            document.getElementById('user-modal').classList.remove('active');
            currentEditingUser = null;
        }

        function saveUserRole() {
            const role = document.getElementById('user-role').value;
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å API –≤—ã–∑–æ–≤
            showSuccess(`–†–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è #${currentEditingUser} –∏–∑–º–µ–Ω–µ–Ω–∞ –Ω–∞: ${role}`);
            closeUserModal();
            loadUsers(); // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        }

        async function deleteInstructor(instructorId) {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ–≥–æ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è?')) {
                try {
                    const response = await fetch(`/api/admin/instructors/${instructorId}`, {
                        method: 'DELETE'
                    });
                    
                    const data = await response.json();
                    
                    if (data.success) {
                        showSuccess('–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω');
                        loadInstructors();
                    } else {
                        showError('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è');
                    }
                } catch (error) {
                    showError('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è');
                }
            }
        }

        async function deleteContent(type, id) {
            if (confirm(`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç ${type}?`)) {
                try {
                    const response = await fetch(`/api/admin/content/${type}/${id}`, {
                        method: 'DELETE'
                    });
                    
                    const data = await response.json();
                    
                    if (data.success) {
                        showSuccess(`${type} —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω`);
                        loadTabData(currentTab);
                    } else {
                        showError('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏');
                    }
                } catch (error) {
                    showError('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏');
                }
            }
        }

        async function deleteMedia(id) {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Ñ–∞–π–ª?')) {
                try {
                    const response = await fetch(`/api/media/${id}`, {
                        method: 'DELETE'
                    });
                    
                    const data = await response.json();
                    
                    if (data.success) {
                        showSuccess('–§–∞–π–ª —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω');
                        loadMedia();
                    } else {
                        showError('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞');
                    }
                } catch (error) {
                    showError('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞');
                }
            }
        }

        function showMediaUploadModal() {
            alert('–§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –º–µ–¥–∏–∞ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ');
        }

        function copyUrl(url) {
            navigator.clipboard.writeText(window.location.origin + url).then(() => {
                showSuccess('URL —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä');
            });
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function formatPrice(price) {
            return new Intl.NumberFormat('ru-RU').format(price) + ' ‚ÇΩ';
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        function getFileIcon(mimeType) {
            if (mimeType.startsWith('image/')) return 'üñºÔ∏è';
            if (mimeType.startsWith('video/')) return 'üé¨';
            if (mimeType.startsWith('audio/')) return 'üéµ';
            if (mimeType === 'application/pdf') return 'üìÑ';
            return 'üìé';
        }

        function showError(message) {
            const errorDiv = document.createElement('div');
            errorDiv.className = 'error-message';
            errorDiv.textContent = message;
            document.querySelector('.admin-main').prepend(errorDiv);
            setTimeout(() => errorDiv.remove(), 5000);
        }

        function showSuccess(message) {
            const successDiv = document.createElement('div');
            successDiv.className = 'success-message';
            successDiv.textContent = message;
            document.querySelector('.admin-main').prepend(successDiv);
            setTimeout(() => successDiv.remove(), 5000);
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', initAdmin);
    </script>
</body>
</html>
