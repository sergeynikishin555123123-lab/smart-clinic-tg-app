<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–∫–∞–¥–µ–º–∏—è –ê–ù–ë</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: white;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .header {
            text-align: center;
            padding: 40px 0;
        }
        .loading {
            text-align: center;
            padding: 50px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéì –ê–∫–∞–¥–µ–º–∏—è –ê–ù–ë</h1>
            <p>–°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–ª—è –≤—Ä–∞—á–µ–π</p>
        </div>
        
        <div class="loading">
            <h2>–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...</h2>
            <p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ</p>
        </div>
    </div>

    <script>
        // –ü—Ä–æ—Å—Ç–æ–π –∑–∞–≥—Ä—É–∑—á–∏–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        async function initApp() {
            try {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å API
                const healthResponse = await fetch('/api/health');
                const healthData = await healthResponse.json();
                console.log('API –¥–æ—Å—Ç—É–ø–µ–Ω:', healthData);

                // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                const userResponse = await fetch('/api/user', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        id: 898508164,
                        firstName: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å',
                        username: 'user'
                    })
                });
                const userData = await userResponse.json();
                console.log('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:', userData);

                // –ó–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç
                const contentResponse = await fetch('/api/content');
                const contentData = await contentResponse.json();
                console.log('–ö–æ–Ω—Ç–µ–Ω—Ç:', contentData);

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É—Å–ø–µ—à–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É
                document.querySelector('.loading').innerHTML = `
                    <h2>‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ!</h2>
                    <p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${userData.user.firstName}!</p>
                    <p>–î–æ—Å—Ç—É–ø–Ω–æ –∫—É—Ä—Å–æ–≤: ${contentData.data.courses.length}</p>
                    <button onclick="showCourses()">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫—É—Ä—Å—ã</button>
                `;

            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', error);
                document.querySelector('.loading').innerHTML = `
                    <h2>‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</h2>
                    <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É</p>
                    <button onclick="location.reload()">–û–±–Ω–æ–≤–∏—Ç—å</button>
                `;
            }
        }

        function showCourses() {
            document.querySelector('.loading').innerHTML = `
                <h2>üìö –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫—É—Ä—Å—ã</h2>
                <div style="background: white; color: black; padding: 20px; border-radius: 10px; margin: 20px 0;">
                    <h3>–ú–∞–Ω—É–∞–ª—å–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏ –≤ –ø—Ä–∞–∫—Ç–∏–∫–µ –Ω–µ–≤—Ä–æ–ª–æ–≥–∞</h3>
                    <p>6 –º–æ–¥—É–ª–µ–π –ø–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º –º–∞–Ω—É–∞–ª—å–Ω—ã–º –º–µ—Ç–æ–¥–∏–∫–∞–º</p>
                    <p><strong>–¶–µ–Ω–∞: 25 000 ‚ÇΩ</strong></p>
                    <button style="background: #3b82f6; color: white; border: none; padding: 10px 20px; border-radius: 5px;">
                        –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                    </button>
                </div>
                <button onclick="initApp()">‚Üê –ù–∞–∑–∞–¥</button>
            `;
        }

        // –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
